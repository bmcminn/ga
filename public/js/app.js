_.templateSettings.escape=/\{\{-(.*?)\}\}/g,_.templateSettings.interpolate=/\{\{(.+?)\}\}/g;var App={};App.vent=_.extend({},Backbone.Events),App.Collections={},App.Models={},App.Views={},App.Collections.SearchableCollection=Backbone.Collection.extend({},{search:function(e,t){var i=$.Deferred();t=t||{};var n=new this([],t);n.url=_.result(n,"url");var o=n.fetch({data:{s:e}});return o.done(_.bind(function(){App.vent.trigger("search:done"),i.resolveWith(this.Search,[n])},this)),o.fail(function(){App.vent.trigger("search:fail"),i.reject()}),i.promise()}});var MovieResults=App.Collections.SearchableCollection.extend({url:"http://omdbapi.com/"}),Movie=Backbone.Model.extend(),Movies=Backbone.Collection.extend({model:Movie}),MovieView=Backbone.View.extend({tagName:"li",events:{click:"onClick"},template:_.template($("#movie").html()),initialize:function(e){this.bus=e.bus},onClick:function(){this.bus.trigger("movie:selected",this.model)},render:function(){return console.log(this.model),this.$el.html(this.template(this.model)),this}}),MoviesView=Backbone.View.extend({tagName:"ul",el:"#movies",initialize:function(e){this.bus=e.bus},render:function(){var e=this;return this.collection.each(function(t){var i=t.toJSON().Search;i.forEach(function(t){var i=new MovieView({model:t,bus:e.bus});e.$el.append(i.render().$el)})}),this}}),findMovies=MovieResults.search("robin hood");findMovies.done(function(e){var t=new MoviesView({collection:e});t.render()});